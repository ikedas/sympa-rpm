From d1eeef0c743cd5bb778ac9da71b5f6a286641260 Mon Sep 17 00:00:00 2001
From: Xavier Bachelot <xavier@bachelot.org>
Date: Wed, 26 Dec 2018 20:11:09 +0100
Subject: [PATCH 1/2] BindTo has been renamed to BindsTo since systemd v187

---
 src/etc/script/sympa-archive.servicein  | 2 +-
 src/etc/script/sympa-bounce.servicein   | 2 +-
 src/etc/script/sympa-outgoing.servicein | 2 +-
 src/etc/script/sympa-task.servicein     | 2 +-
 src/etc/script/sympasoap.servicein      | 2 +-
 src/etc/script/wwsympa.servicein        | 2 +-
 6 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/src/etc/script/sympa-archive.servicein b/src/etc/script/sympa-archive.servicein
index 0091a98d3..9daae6f8d 100644
--- a/src/etc/script/sympa-archive.servicein
+++ b/src/etc/script/sympa-archive.servicein
@@ -1,7 +1,7 @@
 [Unit]
 Description=Sympa mailing list manager (archiving)
 After=syslog.target
-BindTo=sympa.service
+BindsTo=sympa.service
  
 [Service]
 Type=forking
diff --git a/src/etc/script/sympa-bounce.servicein b/src/etc/script/sympa-bounce.servicein
index 6b15ee921..35dd9d24c 100644
--- a/src/etc/script/sympa-bounce.servicein
+++ b/src/etc/script/sympa-bounce.servicein
@@ -1,7 +1,7 @@
 [Unit]
 Description=Sympa mailing list manager (bounce processing)
 After=syslog.target
-BindTo=sympa.service
+BindsTo=sympa.service
  
 [Service]
 Type=forking
diff --git a/src/etc/script/sympa-outgoing.servicein b/src/etc/script/sympa-outgoing.servicein
index 670b33a9e..7c430fe73 100644
--- a/src/etc/script/sympa-outgoing.servicein
+++ b/src/etc/script/sympa-outgoing.servicein
@@ -1,7 +1,7 @@
 [Unit]
 Description=Sympa mailing list manager (message distribution)
 After=syslog.target
-BindTo=sympa.service
+BindsTo=sympa.service
  
 [Service]
 Type=forking
diff --git a/src/etc/script/sympa-task.servicein b/src/etc/script/sympa-task.servicein
index a3a560a06..2a4fe1d57 100644
--- a/src/etc/script/sympa-task.servicein
+++ b/src/etc/script/sympa-task.servicein
@@ -1,7 +1,7 @@
 [Unit]
 Description=Sympa mailing list manager (task management)
 After=syslog.target
-BindTo=sympa.service
+BindsTo=sympa.service
  
 [Service]
 Type=forking
diff --git a/src/etc/script/sympasoap.servicein b/src/etc/script/sympasoap.servicein
index aaa718dee..76b4f54dd 100644
--- a/src/etc/script/sympasoap.servicein
+++ b/src/etc/script/sympasoap.servicein
@@ -1,7 +1,7 @@
 [Unit]
 Description=SympaSOAP - SOAP interface for Sympa mailing list manager
 After=syslog.target
-BindTo=sympa.service
+BindsTo=sympa.service
  
 [Service]
 Type=forking
diff --git a/src/etc/script/wwsympa.servicein b/src/etc/script/wwsympa.servicein
index 9e68442c2..aade15ec6 100644
--- a/src/etc/script/wwsympa.servicein
+++ b/src/etc/script/wwsympa.servicein
@@ -1,7 +1,7 @@
 [Unit]
 Description=WWSympa - Web interface for Sympa mailing list manager
 After=syslog.target
-BindTo=sympa.service
+BindsTo=sympa.service
  
 [Service]
 Type=forking

From 59c0248bdb245e93927f7c0ab752c86b0d124c18 Mon Sep 17 00:00:00 2001
From: Xavier Bachelot <xavier@bachelot.org>
Date: Fri, 4 Jan 2019 20:27:20 +0100
Subject: [PATCH 2/2] Weaken link between sympa and wwsympa/sympasoap

wwsympa and sympasoap do not strictly require the other sympa services to be
useful. However, BindsTo enforces that in both systemd unit files, thus replace
with After.
---
 src/etc/script/sympasoap.servicein | 3 +--
 src/etc/script/wwsympa.servicein   | 3 +--
 2 files changed, 2 insertions(+), 4 deletions(-)

diff --git a/src/etc/script/sympasoap.servicein b/src/etc/script/sympasoap.servicein
index 76b4f54dd..8290a005e 100644
--- a/src/etc/script/sympasoap.servicein
+++ b/src/etc/script/sympasoap.servicein
@@ -1,7 +1,6 @@
 [Unit]
 Description=SympaSOAP - SOAP interface for Sympa mailing list manager
-After=syslog.target
-BindsTo=sympa.service
+After=syslog.target sympa.service
  
 [Service]
 Type=forking
diff --git a/src/etc/script/wwsympa.servicein b/src/etc/script/wwsympa.servicein
index aade15ec6..233c14b12 100644
--- a/src/etc/script/wwsympa.servicein
+++ b/src/etc/script/wwsympa.servicein
@@ -1,7 +1,6 @@
 [Unit]
 Description=WWSympa - Web interface for Sympa mailing list manager
-After=syslog.target
-BindsTo=sympa.service
+After=syslog.target sympa.service
  
 [Service]
 Type=forking
